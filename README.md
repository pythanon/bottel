# Бот по поиску отелей в Telegram 

Telegram-бот осуществляет поиск отелей по заданный критериям с помощью **API** от [Hotels.com](https://www.hotels.com/).
Язык: **Python 3.10**

### Инструкция по запуску:
**1. Создайте папку, в которой хотите сохранить проект.**

**2. Установите и активируйте виртуальную среду.**
```
$ pip install virtualenv
$ python -m venv venv
$ source venv/scripts/activate
```
**3. Клонируйте проект.**
```
$ git clone https://gitlab.skillbox.ru/aleksandr_chernykh_1/PA_Python_DPO_bot.git
```
**4. Установите зависимости из 'requirements.txt'.**
```
$  pip install -r requirements.txt
```
**5. Создайте telegram-бота у [BotFather](https://t.me/BotFather).**

**6. Получите токен вашего бота.**

**7. Получите ключ от API.**
- **Зарегистрироваться** на сайте **rapidapi.com.**
- **Перейти** на документацию **[Hotels API Documentation](https://rapidapi.com/apidojo/api/hotels4)**
- Нажать кнопку **Subscribe to Test**.
- Выбрать бесплатный пакет **(Basic)**.
- Получить **X-RapidAPI-Key**

**8. Создайте файл .env по шаблону .env.template и пропишите токен бота, а также ключ от API.**

**9. Запустите скрипт.**
```
$ python main.py
```
## Команды бота:

- **/start** — Запустить бота.
- **/help** — Вывести список доступных команд.
- **/lowprice** — Вывести Топ самых дешёвых отелей в городе.
- **/highprice** — Вывести Топ самых дорогих отелей в городе.
- **/bestdeal** — Вывести отели по заданной цене и расположению от центра .
- **/history** — Посмотреть или очистить историю поиска.

## Работы команд.

В командах **/lowprice**, **/highprice** и **/bestdeal** бот запросит:
- Город для поиска отеля.
- Даты заселения и выселения.
- Сколько отелей нужно показать.
- Нужно ли показывать фото отелей -> кол-во фото на каждый отель.

Если команда пользователя **/bestdeal**, бот также запросит  дополнительно:
- Необходимый диапазон цен за одну ночь.
- Максимальная удаленность отеля от центра города.

В команде **/history** бот предложит следующие действия:
1. **Посмотреть историю поиска.**
    - Вывод истории запросов.
    - Выбор запроса.
    - Вывод результатов.
2. **Очистить историю.**
    - Удаление истории из БД.
### Рекомендации по работе с ботом и API.
- Бот работает **только** с запущенным скриптом `main.py`.
- **Название города** должно включать в себя **буквы**.
- **Цены** и **расстояние от центра** должны быть **натуральными числами**.
- Количество **фото** — натуральное число.
    - **Максимальное** возможное количество - **10**.
- Количество **отелей** — натуральное число.
    - **Максимальное** возможное количество - **10**.
- У базового пакета **API** есть **ограничение** по
количеству запросов в месяц, а именно — **500**. 
Если возникнет проблема с нехваткой запросов, то просто **зарегистрируйте ещё один
аккаунт**.
